{
  "version": 3,
  "sources": ["../../../../../app/routes/_auth/signup/_route.tsx"],
  "sourcesContent": ["import { z } from \"zod\";\nimport { useId } from \"react\";\nimport { parse } from \"@conform-to/zod\";\nimport {\n  Form,\n  Link,\n  useActionData,\n  useNavigation,\n  useSearchParams,\n} from \"@remix-run/react\";\nimport { conform, useForm } from \"@conform-to/react\";\nimport type { ActionArgs, LoaderArgs, V2_MetaFunction } from \"@remix-run/node\";\nimport { json, redirect } from \"@remix-run/node\";\nimport { Loader2 } from \"lucide-react\";\n//components\nimport {\n  Button,\n  Heading,\n  Input,\n  Paragraph,\n  buttonVariants,\n} from \"~/components/ui\";\n// utils\nimport { safeRedirect } from \"~/utils\";\n\nimport { createUserSession, getUserId } from \"~/session.server\";\nimport { createUser, getUserByEmail } from \"~/models/user.server\";\nimport { cn } from \"~/utils/cn\";\n\nconst schema = z.object({\n  fullName: z.string({ required_error: \"Full name is required\" }),\n  email: z\n    .string({ required_error: \"Email is required\" })\n    .email(\"Email is invalid\"),\n  password: z\n    .string({ required_error: \"Password is required\" })\n    .min(4, { message: \"Password must be at least 4 characters.\" }),\n  redirectTo: z.string(),\n});\n\nexport const meta: V2_MetaFunction = () => [\n  { title: \"Sign up | Remix Template\" },\n];\n\nexport const loader = async ({ request }: LoaderArgs) => {\n  const userId = await getUserId(request);\n\n  if (userId) return redirect(\"/dashboard/overview\");\n\n  return json({});\n};\n\nexport const action = async ({ request }: ActionArgs) => {\n  const formData = await request.formData();\n  const submission = parse(formData, { schema });\n\n  if (!submission.value || submission.intent !== \"submit\") {\n    return json(submission, { status: 400 });\n  }\n\n  const existingUser = await getUserByEmail(submission.value.email);\n  if (existingUser) {\n    return json(\n      {\n        ...submission,\n        error: { email: [\"A user already exists with this email\"] },\n      },\n      { status: 400 }\n    );\n  }\n\n  const user = await createUser(\n    submission.value.fullName,\n    submission.value.email,\n    submission.value.password\n  );\n\n  return createUserSession({\n    redirectTo: safeRedirect(submission.value.redirectTo, \"/\"),\n    remember: false,\n    request,\n    userId: user.id,\n  });\n};\n\nexport default function SignUp() {\n  const id = useId();\n\n  const [searchParams] = useSearchParams();\n  const navigation = useNavigation();\n  const actionData = useActionData<typeof action>();\n  const redirectTo = searchParams.get(\"redirectTo\") || \"/dashboard/overview\";\n\n  const [form, { fullName, email, password }] = useForm<z.input<typeof schema>>(\n    {\n      lastSubmission: actionData,\n      id,\n      shouldValidate: \"onBlur\",\n      onValidate({ formData }) {\n        return parse(formData, { schema });\n      },\n    }\n  );\n\n  return (\n    <div className=\"flex h-full w-full items-center justify-center bg-[#F4F4F7] p-5  lg:p-0\">\n      <div className=\"rounded-2xl bg-white p-6 md:p-8 lg:w-8/12\">\n        <Link\n          to=\"/login\"\n          className={cn(buttonVariants({ variant: \"link\" }), \"mb-5\")}\n        >\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"20\"\n            height=\"20\"\n            viewBox=\"0 0 20 20\"\n            fill=\"none\"\n          >\n            <path\n              d=\"M7.97484 4.94141L2.9165 9.99974L7.97484 15.0581\"\n              stroke=\"#1A1C1E\"\n              strokeWidth=\"1.5\"\n              strokeMiterlimit=\"10\"\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n            />\n            <path\n              d=\"M17.0831 10H3.05811\"\n              stroke=\"#1A1C1E\"\n              strokeWidth=\"1.5\"\n              strokeMiterlimit=\"10\"\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n            />\n          </svg>\n        </Link>\n\n        <Heading\n          variant=\"h1\"\n          className=\"pb-3 text-center text-2xl lg:text-[32px]\"\n        >\n          Create New Account{\" \"}\n        </Heading>\n\n        <Paragraph variant=\"body2\" className=\"pb-8 text-center\">\n          Please register by filling in your personal data\n        </Paragraph>\n\n        <Form method=\"POST\" className=\"mx-auto\" {...form.props}>\n          <fieldset\n            className=\"space-y-6 disabled:opacity-70\"\n            disabled={navigation.state !== \"idle\"}\n          >\n            <Input\n              label=\"Full name\"\n              placeholder=\"Full name\"\n              data-testid=\"full-name\"\n              error={fullName.error}\n              {...conform.input(fullName)}\n            />\n\n            <Input\n              label=\"Email\"\n              placeholder=\"Email\"\n              data-testid=\"email\"\n              error={email.error}\n              {...conform.input(email, {\n                type: \"email\",\n              })}\n            />\n\n            <Input\n              label=\"Password\"\n              placeholder=\"Password\"\n              data-testid=\"password\"\n              error={password.error}\n              {...conform.input(password, {\n                type: \"password\",\n              })}\n            />\n\n            <input type=\"hidden\" name=\"redirectTo\" value={redirectTo} />\n\n            <Button type=\"submit\" size=\"lg\" className=\"w-full\">\n              {navigation.state !== \"idle\" ? (\n                <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n              ) : (\n                \"Create account\"\n              )}\n            </Button>\n\n            <div className=\"text-center text-sm font-medium text-secondary-400\">\n              Already have an account?{\" \"}\n              <Link to=\"/login\" className=\"text-primary-500\">\n                Login\n              </Link>\n            </div>\n          </fieldset>\n        </Form>\n      </div>\n\n      <div className=\"absolute hidden text-sm text-secondary-400 lg:bottom-3 lg:block\">\n        \u00A9 2022 Finlab. All rights reserved.\n      </div>\n    </div>\n  );\n}\n"],
  "mappings": "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",
  "names": []
}
